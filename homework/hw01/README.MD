## Домашнее задание: Обновить ядро в базовой системе

## Решение:
Выясним, что у нас за система:
```
$ uname -a
```
>Linux kernel-update 3.10.0-1127.el7.x86_64 #1 SMP Tue Mar 31 23:36:51 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux
```
$ uname -r
```
>3.10.0-1127.el7.x86_64
```
$ cat /etc/centos-release
```
>CentOS Linux release 7.8.2003 (Core)

Подключаем репозиторий, откуда возьмем необходимую версию ядра.
```
$ sudo yum install -y http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm
```
В репозитории есть две версии ядер kernel-ml и kernel-lt. Первая является наиболее свежей стабильной версией, вторая это стабильная версия с длительной поддержкой, но менее свежая, чем первая. В данном случае ядро 5й версии будет в kernel-ml.
Поскольку мы ставим ядро из репозитория, то установка ядра похожа на установку любого другого пакета, но потребует явного включения репозитория при помощи ключа `--enablerepo`
Ставим последнее ядро:
```
$ sudo yum --enablerepo elrepo-kernel install kernel-ml -y
```

## grub update

После успешной установки нам необходимо сказать системе, что при загрузке нужно использовать новое ядро. В случае обновления ядра на рабочих серверах необходимо перезагрузиться с новым ядром, выбрав его при загрузке. И только при успешно прошедших загрузке нового ядра и тестах сервера переходить к загрузке с новым ядром по-умолчанию. В тестовой среде можно обойти данный этап и сразу назначить новое ядро по-умолчанию. 
Обновляем конфигурацию загрузчика:
```
$ sudo grub2-mkconfig -o /boot/grub2/grub.cfg
```
Выбираем загрузку с новым ядром по-умолчанию:
```
$ sudo grub2-set-default 0
```
Перезагружаем.
```
$ sudo reboot
```
После перезагрузки виртуальной машины (3-4 минуты, зависит от мощности хостовой машины) заходим в нее и выполняем:
```
$ uname -r
```
>
